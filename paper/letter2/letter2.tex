\documentclass{article}
\usepackage{xcolor}
\usepackage[margin=0.5in]{geometry}
\usepackage{amsmath}
\newcommand\formatfeedback[2]
{%
	\textbf{Reviewer:} \textcolor{red}{#1} 
	\leavevmode\\[0.1in] \textbf{Response:} \textcolor{blue}{#2}
}
\begin{document}
\noindent Dear Dr. Bart van Arem, \\ \\
My Colleages and I are grateful for the opportunity to revise our paper. The reviewers have provided excellent feedback which we have incorporated to improve the quality of the manuscript. Our response to each reviewer comment appears below. The reviewer comments are given in the red format and our responses are in blue.

\subsection*{Reviewer 2}
The comments for reviewer 1 are addressed here:
\begin{enumerate}
	\item \formatfeedback{The paper has been improved and the proposed modeling for the optimization problem is interesting. However, one of the key outstanding issue is that the authors spent no effort to cite/survey and critic several recent papers published in top-tier journals and addressing the same problem. Minimization of the cost of charging ``charging problem" with consideration of different rates of electricity prices such as time of use is not novel. By searching in the IEEE Xplore database with quote "Electric Bus fleets", there are several journal papers published in the area. Examples are:
\begin{itemize}
	\item DOI: 10.1109/JSYST.2021.3114271
	\item DOI: 10.1109/JSYST.2019.2926460
	\item DOI: 10.1109/ACCESS.2020.2964391
\end{itemize}
}{Thank you for the feedback! As requested, we went back and reviewed literature from several sources including the IEEE Systems Journal, IEEE Access, and IEEE Transactions on Intelligent Transportation Systems. The content that we found generally overlapped with work we had cited in our literature review, although our review is certainly not exhaustive. There also seems to be some confusion. The first two papers given by the reviewer solve infrastructure planning problems, which address the question of where and how much charging infrastructure should be installed to meet the anticipated demands. The questions that our work answers are: When should electric buses charge once the infrastructure is already installed? and How can variable rate charging decrease cost? While not unrelated, we desired to limit the scope of our literature review to papers that focused on the same questions as us. The reviewer brings up a good point that these could be easily misunderstood, so we have added a brief description of the infrastructure problem and described how our work extends theirs as a transit authority must first decide on their infrastructure configuration and then plan charge times.}
	\item \formatfeedback{Each bus or group of buses have their own designated platform in a bus terminal. As such, it is very unlikely to assign buses for different chargers i.e., each bus will be assigned to a charger located in its platform. Hence, having the probability/possibility of  two buses (bus 1 and bus 2) to be connected to the same charger at time t is not applicable. usually, bus 1 and 2 will have different platforms and thus different chargers.}{There are certainly scenarios where each bus would have a separate platform. Our work was focused around what we observed at the Utah Transit Authority in Salt Lake City, where the station maintains two overhead fast chargers to be shared among buses during the day. We also anticipate that transit authorities will desire to save money by only installing the minimum number of chargers, which would lead to contention and a tendency to overbook. Our work focuses on the more general case, knowing that under different assumptions, the proposed method could be simplified.}
	\item \formatfeedback{Time steps will not be uniform in a bus fleet a they vary based on the arrival time(s) of buses, which also varies over the daytime.}{ We understand this comment to be asking why the proposed method doesn't align the time steps in the graph with the arrival and departure times of the buses. We use an evenly spaced sampling approach to establish a common temporal frame of reference so that the effects of power use from the uncontrolled loads can be combined with those of the electric chargers. The joint effects of the uncontrolled and bus charger loads are used to compute the demand on a single meter. Previous work has defined methods to decrease demand from the bus chargers, however we belive that a framework which encompasses both electric bus chargers and additional loads that are not controlled by the charge plan to be one of our paper's contributions.} 
	\item \formatfeedback{Order of referencing within the text is not clear. It has to start from [1]....}{Good catch! I have updated the references so that they are numbered by appearance.}
	\item \formatfeedback{It is very strange talking about Fig. 5 before Fig. 4 in the text.}{We have updated the figures so that their numbers better follow their appearances.}
	\item \formatfeedback{In the reviewer's opinion, the authors complicated an optimization problem that could be easily formulated and solved via its reformulation as a graph. The main issue with such graph-based formulations is the scalability and computation complexity. The authors are advised to compare the proposed formulation with a regular optimization formulation under different sizes of bus fleets. There is little to no description about the superiority of the proposed graph-based technique in the results section.}{We understand the reviewer's comments to mean that because the proposed method was made more complicated when it was reformulated as a graph, it may not scale well, making it less effective than alternative solutions. One contribution our method offers is the ability to account for the effects of uncontrolled loads on price. The uncontrolled loads are computed from historical data, which is by nature, discrete. Before the effects of external loads and bus charging could be integrated into a single framework, they had to be brought into temporal correspondance, which was accomplished using a graph. Prior methods did not account for the uncontrolled loads in their solutions and as such, did not need to descritize their temporal components. This solution may be more complicated than other methods, but this is because the proposed method is more complete. We have shown that including the additional information in our method results in significant savings (see Fig. 17) and outperforms both a baseline and previous optimization technique. We have included an additional plot which shows how the number of constraints and variables increase with the number of buses so that the reader may be aware of computational limitations. 
 }
\end{enumerate}
\subsection*{Review 3}
The comments for reviewer 3 are addressed here:
\begin{enumerate}
	\item  \formatfeedback{What is the benefit of using a graph-based network flow framework to present the BEB charging
optimization problem instead of an equation-based MILP mathematical formulation (considering
the charging variable as a decision)? Many similar published studies take the other approach, such
as (https://doi.org/10.1016/j.tre.2020.102056 and https://doi.org/10.1016/j.trd.2021.103009).}{The reviewer brings up a good point. We chose to use a graph based framework for this method because we needed a way to include a representation for loads that are outside the control of the charge plan, which we also refer to as uncontrolled loads. Because the uncontrolled loads are sampled at regular, discrete intervals, we needed a framework where effects from buses and other loads could be brought into temporal correspondance. Prior methods did not account for the uncontrolled loads in their solutions and as such, did not need to temporally descritize their representations for power. This solution may be more complicated than other methods, but this is because the proposed method is more complete. We have shown that including the additional information for uncontrolled loads in our method results in significant savings (see Fig. 17) and outperforms both a baseline and previous optimization technique. The reviewer is also right when they claim that these additions have made the problem more complex. We have included an additional plot which shows how the number of constraints and variables increase with the number of buses so that the reader may be aware of computational limitations.} 
	\item \formatfeedback{Many other similar works related to BEB charging optimization are published in energy and
transportation journals (e.g., Transportation Research Journals group). A comparison between the
proposed and previous models is essential to highlight the paper’s contributions (better in a table).
Including charge demand, electricity ToU tariff, and day/night charging are not new.}{We understand this comment to house two concerns: The proposed work does not include an adequate comparison with previous models, and the proposed work claims the addition of ToU tariffs and day/night charging as novel contributions when this has been done before. To address the first, our paper includes a comparison with both a baseline which models the behavior of drivers at the Utah Transit Authority in Salt Lake City, and a current state of the art algorithm from the literature in Fig. 17 with additional comparisons and analysis in Fig. 18 and Fig. 19. To address the second concern, we agree that the inclusion of day/night charging and time of use tariff is not novel. What we propose to be novel is how we included day/night charging, time of use tariffs, uncontrolled loads, and variable rate charging together in a single optimization problem (See Section IC).} 
\item \formatfeedback{It is essential to illustrate the model assumptions (charging stations allocation, chargers’ power,
battery capacity, transit network) at the beginning of the model presentation (summarized). In
addition, it will be better to include a table for the value of all parameters.}{We agree with the reviewer in that models assumptions should be presented in the given work. We have chosen to include the assumptions as part of the results section introduction. For example, the battery capacity is given in Section A paragraph 6. We also understand that it is popular for many authors to include a reference table which describes the parameters and variables for their optimization problem. We have considered using one ourselves but prefer to not use a table for two reasons. The first is that we desire the reader to be introduced to a variable while reading the paper because it provides appropriate context and motivation for that variable. Because a table does not provide the same context, we prefer to define and describe variables in a narrative fashion as our paper progresses. The second reason we chose not to include a table was to conserve space.  Our paper is already 14 pages long and we prefer to save space especially because any information from a table would be redundent. If a table is required for publication, we will provide one but as this is not a requirement for this journal, we prefer to not use a table.}
	\item \formatfeedback{There is a constraint for the state of charge (SoC) to be greater than a lower threshold. Is there a
constraint for SoC to be less than a maximum threshold?}{Because we are using a CCCV model for the battery, the difference in state of charge decreases as the state of charge approaches its maximum. Therefore, the SOC for any bus will asymptotically approach the maximum value and no other constraints were necessary.}
	\item \formatfeedback{In the literature, high-power chargers (fast chargers) are deployed to charge the BEBs during
operation. Will the results change if these chargers are used?}{It's certainly possible that results related to the effectiveness of variable rate charging could change although a more comprehensive analysis was outside the scope of this paper. We would not anticipate other results to change significantly.}
	\item \formatfeedback{The number of variables, constraints and the computing time of the solved models should be
presented in the paper to describe the complexity of the proposed model. In addition, the transit
network data and the charging system infrastructure configuration must be included.}{This is great feedback, we have added an additional plot that illustrates how the number of constraints and variables  increase with the number of buses. The proposed work did not make any assumptions regarding the charging system infrastructure configuration, only that each charger is assumed to be on the same billing meter.}
	\item \formatfeedback{In the text, Fig 5 before Fig 4 and Fig 13 before Fig 12.}{We have updated the figure references to reflect their use.}
	\item \formatfeedback{Equation 10 is equality or inequality?? The summation in Equation 39 is on buses or timeslots?}{Good catch, it was inequality.  We have updated equation 10. The summation in equation 39 was for all buses in a given timeslot. We have updated the wording to make this more clear.}
	\item \formatfeedback{In equation 11, the energy consumption $\delta_i$ is only related to the bus ID. How is it calculated in
the proposed model (what is the value)?}{The model itself does not compute $\delta_i$ because it is assumed this is known ahead of time. For our analysis, we computed $\delta_i$ from historical data that we recieved from the Utah Transit Authority in Salt Lake City. We have added a description of how these variables were computed in the results section of our paper.}
\end{enumerate}
\end{document}
