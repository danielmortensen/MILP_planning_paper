\section{Introduction}
Recent calls for a reduced carbon footprint have led transit authorities to adopt battery electric buses (BEBs). Replacing diesel and CNG buses with BEBs reduces environmental impact \cite{zhou_optimization_2018} as BEBs provide zero vehicle emissions and can access renewable energy sources \cite{poornesh_comparative_2020, Mahmoud2016}.

\par Charging BEBs draws power from electrical infrastructure. The combined effect of BEB charging with other necessary loads can exceed the capacity of local distribution circuits \cite{stahleder_impact_2019, deb_impact_2017, boonraksa_impact_2019}, leading to expensive infrastructure upgrades. Power providers pass the cost of upgrades on to customers.  Thus, the benefits of large-scale electrified bussing seem appealing at first, but are only practical if infrastructural upgrades can be deferred or avoided altogether.

\par One approach to deferring or avoiding upgrades is to intentionally manage when and at what rates buses should charge. An optimal charge plan must account for a number of physical constraints and operational realities. For example, buses must exceed a minimum charge level while adhering to route schedules, batteries must have sufficient time to charge, and buses must share a limited number of chargers. The focus of this work is to find an optimal charge schedule which meets these requirements and minimizes the cost of electricity and grid impacts in the presence of other uncontrolled loads. This problem is referred to hereafter as the ``charge problem''.

\par Previous work has done much to further state of the art in this regard with solutions ranging from heuristic approaches and linear programs to battery exchanges (See Section \ref{literature} for details). The contributions our paper offers which we have not observed in current literature, is the combination of: (1) Differences in night and day charging, (2) the ability to vary charge rates, (3) Encorporating non-BEB grid activity into the optimization scheme, and (4) the use of a real-world rate schedule which encompasses both time-of-use energy rates and demand fees to reduce the instantanious load on the grid.

\par Without these elements, a charge schedule may not fully utilize the available charging resources to reduce the monthly cost of energy.  For example, Rocky Mountain Power may charge upwards of 15.00\$ per kW for the largest use of instantaneous power over a 15-minute window which may account for over a third of the monthly power expenses. Additionally, Rocky Mountain Power may also charge close to double for energy used during on-peak hours.  While previous work has addressed time of use tarrifs \cite{Zhou_2020_Collaborative} and instantanious power demand \cite{qin_numerical_2016} we have not seen these elements together and minimizing using Rocky Mountain Power's rate schedule provides a clear way of integrating the two.
\par Another example where our work addresses unsolved issues lies on the use of night/day charge parameters.  In the Utah Transit Authority station in Salt Lake City, Utah, buses are able to charge on a limited number of fast overhead chargers during the day, and an unlimited number of slower chargers at night.  By breaking the problem into day and night segments, we encode these differences into the optimization framework. For a comprehensive list of contributions, please see Section \ref{contributions}.

\par The remainder of this paper is organized as follows: Section II describes prior related work and Section III outlines a graph-based framework for modeling the environment including buses, routes, chargers, and uncontrolled loads. Section IV incorporates the problem constraints involving battery charge dynamics and Section V extends the the graph framework to account for differences between day and night operations.  Section VI translates the rate schedule used for billing into an objective function. Finally, Sections VII and VIII present results and describe future work, respectively.
