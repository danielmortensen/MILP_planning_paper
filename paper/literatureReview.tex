\section{Literature Review}
\par This section summarizes prior work related to the charge problem and includes discussion on battery charging and managing runtime costs. The final subsection discusses the contributions of this paper, and how they relate to prior methods.
\subsection{Battery Charging}
Recharging BEBs is more time consuming than refueling diesel and CNG buses \cite{wei_optimizing_2018}. A diesel or CNG engine can refuel in several minutes but an electric bus may require several hours to charge, making the extended charge time a primary impediment in converting to BEBs.
\par To circumvent long refuel times, \cite{xian_zhang_optimal_2016} and \cite{jain_battery_2020} propose an approach which replaces batteries when the state of charge is low. The exchange would replace the current battery with one that was fully charged and return spent batteries to recharge afterward. Exchanging batteries reduces down time, but is non-trivial because battery swapping requires specialized tools and/or automation.
\par Another alternative is to inductively charge buses while they are in motion. Dynamic charging simplifies logistics because it eliminates the time involved in stationary charging. Both \cite{balde_electric_2019} and \cite{jeong_automatic_2018} propose methods that inductively charge BEBs using specialized hardware in the road. A technique developed by \cite{csonka_optimization_2021} provides a planning framework for in-road charger placement that maximizes the benefits of dynamic charging.  The method proposed in this paper can leverage in-road dynamic charging where it exists.  However, the framework is developed assuming stationary charging at a bus station.
%Unfortunately, inductive charging requires infrastructure that may not be available or is costly and disruptive to install.
\par Recharging BEBs at a station %allows buses to charge in the traditional sense and
requires only the development of an intelligent charge schedule. Following a charge schedule requires minimal modifications to charging infrastructure and utilizes existing charging ports in the BEBs with no need for additional tools or automation. Algorithms for planning use foreknowledge of the runtime environment and battery dynamics to identify when and to which buses chargers should connect. Planning algorithms discussed in this review are considered on a scale from ``reactive'' to ``global'', where reactive methods respond to stimuli at the present, and global techniques use complete knowledge about the operating environment to form a plan.
\par Because reactive planning generally focuses on present circumstances, it requires minimal knowledge of the operational environment, making reactive planning extremely versatile.  Methods of this type are both computationally efficient and adapt to many use cases.  One such example is illustrated in \cite{cheng_smart_2020}, which splits the total power draw between the grid and an external battery to regulate the instantaneous load.
\par Reactive algorithms can be enhanced by encoding details for future events to improve decision making. If only event details within a finite horizon are used, the algorithm becomes a hybrid, containing features of both reactive and global techniques. For example, \cite{bagherinezhad_spatio-temporal_2020} describes a technique for optimizing a charging schedule out to a scheduling horizon. Changing the horizon adjusts both the scope and computational complexity of the solution. In stochastic environments, a smaller window is beneficial as charge schedules must be frequently recomputed, whereas in more stable circumstances, longer windows can yield improved performance. 
\par Global algorithms include information from all time periods out to a predetermined end time. Because global algorithms assume complete foreknowledge of future events, they provide globally optimal plans and achieve the highest performance. The authors of \cite{jahic_preemptive_2019} provide a technique which assumes foreknowledge of the current grid use. The grid schedule is encoded in the algorithm to inform optimal charging periods. Both \cite{whitaker_network_2021} and \cite{el-taweel_incorporation_2019} assume that bus schedules are known a priori and use this knowledge to stagger charge times to meet operational constraints.
\subsection{Cost Optimization}
In addition to physical constraints such as bus routes and charging dynamics, this paper focuses on minimizing the cost associated with charging and minimizes over fees assessed for on and off-peak energy use, on and off-peak power demand, and facilities power charges \cite{noauthor_rocky_nodate}. Prior work has dealt with charge costs in various ways.  
The authors in \cite{gao_charging_2019} propose a method to forecast power use. Work done by \cite{qin_numerical_2016} propose a method which reduces the demand charge by using power forecasts to plan charge times\cite{gao_charging_2019}.  When forecasting is not possible, both \cite{ojer_development_2020} and \cite{cheng_smart_2020} propose methods that decreases power demand by observing the load and drawing additional power from on-site battery packs. Additionally, \cite{el-taweel_incorporation_2019} minimized over on/off peak energy as part of their work.
\subsection{Contributions}
This paper develops a comprehensive charge schedule planning framework which extends the planner proposed by \cite{whitaker_network_2021} to include multi-rate charging, uncontrolled loads, night/day charging, and a realistic rate schedule in \cite{noauthor_rocky_nodate}. Our method formulates the bus charge problem as a Mixed Integer Linear Program (MILP) and is unique because the objective function is the cost for the transit authority (bus fleet operator) and includes charges for on-peak and off-peak energy use, on-peak and off-peak power demand, and facilities demand. The proposed framework handles contention for charging resources in a globally optimal manner which guarantees charger availability even when chargers are scarce.
\par Prior work has also made assumptions for night time charge behavior. Our work eliminates the need for such by including both day and night charging in the charge schedule optimization. The modeling of night and day charging also includes their respective operational constraints such as charge rates, bus availability, and the number of available chargers.
\par Our work also seeks to understand how variable rate, as compared to single rate charging, affects the cost optimality and contributes a more accurate representation of battery charging dynamics. 
\par The final contribution is recognizing that our framework provides a tool that enables prediction of monthly costs for transit authorities and infrastructure demand for power providers.  Optimized charging schedules reduce power demand and extend use of current electrical infrastructure.

